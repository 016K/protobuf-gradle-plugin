buildscript {
  repositories {
    mavenCentral()
    mavenLocal()
  }
  dependencies {
    classpath "com.google.protobuf:protobuf-gradle-plugin:${rootProject.version}"
  }
}

apply plugin: 'protobuf'

repositories {
    mavenCentral()
}

dependencies {
    compile 'com.google.protobuf:protobuf-java:2.6.1'
    protobuf files("lib/protos.tar.gz")
    //protobuf files("ext/test1.proto", "ext/test2.proto")
    protobuf fileTree("ext/") {
        //exclude 'more.proto'
    }
    testProtobuf files("lib/protos-test.tar.gz")
    testCompile 'junit:junit:4.7'
}

protocDep = 'com.google.protobuf:protoc:2.6.1'
//protobufCodeGenPlugins = ['foo:./protoc-gen-foo']

task printDeps(dependsOn: build) << {
  configurations.each { println it }
  sourceSets.each { println it.getCompileTaskName("proto") }
  sourceSets.each { println it.getCompileTaskName("java") }
  sourceSets.each { println it }
  println tasks['generateProto'].source
  println tasks['compileJava'].source
  println project.buildDir
  println project.buildDir.path
}
